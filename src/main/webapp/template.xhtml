<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
>
<h:head>
    <title>SpendSmart | Expense Tracker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous" />
	<link href="https://fonts.googleapis.com/css2?family=Federo&amp;family=Noto+Sans+Vithkuqi:wght@400..700&amp;display=swap" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/charts/loader.js"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme:{
				extend:{
					colors:{
						'lightText': '#090713',
						'lightBg': "#F9F8FC",
						"lightPrimary": "#604CC2",
						"lightSecondary": "#BB95DB",
						"lightAccent": "#B67AD1",
						'darkText': '#EEECF8',
						'darkBg': "#040307",
						"darkPrimary": "#513DB3",
						"darkSecondary": "#4B246A",
						"darkAccent": "#692E85",
					},
					fontFamily:{
						customHead: ["Federo", "sans-serif"],
						customBody: ["Noto Sans Vithkuqi", "sans-serif"]
					}
				},
				screens: {
					xxl: "1200px",
				    xl: "992px",
				    lg: "840px",
				    md: "768px",
				    sm: "640px",
				    ssm: "576px",
				    vsm: "400px",
				    vvsm: "330px",
				}
            }
        
        }
    </script>
    <script>
        window.addEventListener('DOMContentLoaded', () => {
            const isDark = localStorage.getItem('theme') === 'true';
            if (isDark) {
                document.getElementById('main__body').classList.add('dark');
            } else {
                document.getElementById('main__body').classList.remove('dark');
            }
        });

        function toggleTheme() {
            const mainBody = document.getElementById("main__body");
            const isDark = mainBody.classList.toggle('dark');
            localStorage.setItem('theme', isDark);
        }


    	function handleClick(text){
        	console.log(text)
		    google.charts.load('current', {'packages': ['corechart']});
		    google.charts.setOnLoadCallback(drawChart);
		}

    	function drawChart() {
        	var jsonData = document.getElementById('expenseData').value;
        	var expenses = JSON.parse(jsonData);
	        var data = new google.visualization.DataTable();
	        var data = new google.visualization.DataTable();
            data.addColumn('string', 'Category');
            data.addColumn('number', 'Amount');

            for (var i = 0; i &lt; expenses.length; i++) {
                var category = expenses[i][0];
                var amount = expenses[i][1];
                data.addRow([category, amount]);
            }
            console.log(data);

            var options = {
                'title': 'Expenses by Category',
                'width': 400,
                'height': 300
            };

            var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
            chart.draw(data, options);
	  	}
    </script>
    
    <script>
    	function toggleSidebar() {
	        var sidenav = document.getElementById('dashboard__sidenav');
	        var content = document.getElementById('dashboard__content');
	        var contentSidebarIcon = document.getElementById('content__side_bar_toggle_icon');
	        var expenseCatalogGrid = document.getElementById('dashboard__expense_catalog_card_container_grid')
	
	        if (sidenav.classList.contains('close_sidebar')) {
	            sidenav.classList.remove('close_sidebar');
	            sidenav.classList.add('open_sidebar');
	            content.classList.remove('w-full');
	            contentSidebarIcon.classList.add('hidden');
	            if(expenseCatalogGrid){
	            	expenseCatalogGrid.classList.remove('grid-cols-4');
	            	expenseCatalogGrid.classList.remove('max-xxl:grid-cols-3');
	            	expenseCatalogGrid.classList.remove('max-md:grid-cols-2');
	            	expenseCatalogGrid.classList.add('grid-cols-3');
	            	expenseCatalogGrid.classList.add('max-md:grid-cols-1');
	            	expenseCatalogGrid.classList.add('max-xxl:grid-cols-2');
		        }
	            
	        } else {
	            sidenav.classList.remove('open_sidebar');
	            content.classList.add('w-full');
	            sidenav.classList.add('close_sidebar');
	            contentSidebarIcon.classList.remove('hidden');
	            if(expenseCatalogGrid){
	            	expenseCatalogGrid.classList.remove('grid-cols-3');
	            	expenseCatalogGrid.classList.remove('max-md:grid-cols-1');
	            	expenseCatalogGrid.classList.remove('max-xxl:grid-cols-2');
	            	expenseCatalogGrid.classList.add('grid-cols-4');
	            	expenseCatalogGrid.classList.add('max-xxl:grid-cols-3');
	            	expenseCatalogGrid.classList.add('max-md:grid-cols-2');
		        }
	            if (innerWidth &lt; 640) {
	            	sidenav.classList.add('absolute');
    	            sidenav.classList.add('top-0');
		        }
	            else{
	            	sidenav.classList.remove('absolute');
    	            sidenav.classList.remove('top-0');
		        }
	        }
	    }

    	function checkWindowSize() {
    	    var sidenav = document.getElementById('dashboard__sidenav') || null;
    	    var content = document.getElementById('dashboard__content') || null;
    	    var contentSidebarIcon = document.getElementById('content__side_bar_toggle_icon');
    	    var innerWidth = window.innerWidth;

    	    if (innerWidth &lt; 640) {
    	        if (sidenav!=null &amp;&amp; !sidenav.classList.contains('close_sidebar')) {
    	            sidenav.classList.add('close_sidebar');
    	            sidenav.classList.remove('open_sidebar');
    	            content.classList.add('w-full');
    	            sidenav.classList.add('absolute');
    	            sidenav.classList.add('top-0');
    	            contentSidebarIcon.classList.remove('hidden');
    	        }
    	    }
    	    else{
    	    	sidenav.classList.remove('absolute');
	            sidenav.classList.remove('top-0');
        	}
    	}

    	window.addEventListener('resize', checkWindowSize);
    	document.addEventListener('DOMContentLoaded', checkWindowSize);

    	checkWindowSize();
    </script>
    
    <style>
	    .close_sidebar {
	        animation: animate_close_sidebar 300ms linear forwards;
	    }
	    
	    .nav__container{
	    	z-index: 1000;
	    }
	
	    @keyframes animate_close_sidebar {
	        from {
	            margin-left: 0px; 
	        }
	        to {
	            margin-left: -310px;
	        }
	    }
	
	    .open_sidebar {
	        animation: animate_open_sidebar 300ms linear forwards;
	    }
	
	    @keyframes animate_open_sidebar {
	        from {
	            margin-left: -310px;
	        }
	        to {
	            margin-left: 0px;
	        }
	    }
	
	    .transition-width {
	        transition: width 300ms linear;
	    }
	
	    .w-full {
	        width: 100% !important;
	    }
	    
	    .custom_scrollbar::-webkit-scrollbar {
		  width: 4px;
		  border-radius: 100px;
		}
		
		.custom_scrollbar__hidden::-webkit-scrollbar {
		  width: 4px;
		  height: 0px;
		}
		
		/* Track */
		.custom_scrollbar::-webkit-scrollbar-track {
		  background: transparent;
		  border-radius: 100px;
		}
		
		/* Handle */
		.custom_scrollbar::-webkit-scrollbar-thumb {
		  background: #888;
		  border-radius: 100px;
		}
		
		/* Handle on hover */
		.custom_scrollbar::-webkit-scrollbar-thumb:hover {
		  background: #9e9e9e;
		}
		
		.dropdown-menu option{
			color: black;
		}
		
		
		.income-history_table thead, .custom_table_layout thead{
			padding: 6px 4px;
		}
		.income-history_table thead th, .custom_table_layout thead th{
			text-align: left;
		}
		.income-history_table, .custom_table_layout {
		  	border-collapse: separate;
		  	border-spacing: 0 10px;
		}
		.income-history_table tbody tr, .custom_table_layout tbody tr{
			display: table-row;
			position: relative;
			border-radius: 10px;
			border-width: 1px;
			border-color: transparent;
			overflow: hidden;
			width: 100%;
		}
		.income-history_table tbody tr, .custom_table_layout tbody tr{
		 	background-color: rgb(4 3 7 / 0.06);
			transition-property: all;
			transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
			transition-duration: 150ms;
		}
		.income-history_table tbody tr:hover, .custom_table_layout tbody tr:hover{
		 	background-color: rgb(4 3 7 / 0.1);
		}
		body.dark .income-history_table tbody tr, body.dark .custom_table_layout tbody tr{
		 	background-color: rgb(249 248 252 / 0.1);
		}
		body.dark .income-history_table tbody tr:hover, body.dark .custom_table_layout tbody tr:hover{
		 	background-color: rgb(249 248 252 / 0.15);
		 	transition-property: all;
			transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
			transition-duration: 150ms;
		}
	</style>

</h:head>
<h:body id="main__body" styleClass="w-[100dvw] custom_scrollbar font-customBody overflow-x-hidden">
	<h:panelGroup layout="block" styleClass="dark:bg-darkBg custom_scrollbar bg-lightBg dark:text-darkText text-lightText w-full min-h-[100dvh] h-full flex flex-col">
		<h:panelGroup layout="block" id="header">
	        <ui:insert name="header">
	        	<ui:include src="/header.xhtml" />
	        </ui:insert>
	    </h:panelGroup>

	    <h:panelGroup layout="block" id="content" styleClass="flex flex-1 min-h-[85dvh]">
	        <ui:insert name="content">
	            <h:outputText value="Default Content" />
	        </ui:insert>
	    </h:panelGroup>
	    <h:panelGroup styleClass="hidden" layout="block" id="footer">
	        <ui:insert name="footer">
	            <h:outputText value="Default Footer" />
	        </ui:insert>
	    </h:panelGroup>
	    <h:panelGroup layout="block" id="navigation" styleClass="nav__container flex w-full h-max justify-center fixed bottom-0 bg-transparent px-2 overflow-hidden">
		    <ui:include src="/footerNav.xhtml" />
	    </h:panelGroup>
	    <h:panelGroup rendered="#{homeStore.showMainLoader}" layout="block" styleClass="main__loader w-[100dvw] h-[100dvh] z-[10000] absolute inset-0 backdrop-brightness-75">
	    	<ui:include src="/mainLoader.xhtml" />
	    </h:panelGroup>
	</h:panelGroup>
</h:body>
</html>
